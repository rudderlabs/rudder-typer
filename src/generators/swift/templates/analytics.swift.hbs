/**
 * {{autogeneratedFileWarning}}
 */

import Rudder

class RudderTyperAnalytics {

    {{#each tracks}}
    {{#each properties}}
    {{#if hasEnum}}
	{{#uniqueEnum enumName enumValues}}
	public enum {{enumName}}: {{../type}} {
	    {{enumValues}}
	}
    
	{{/uniqueEnum}}
    {{/if}}
    {{/each}}
    {{/each}}

    {{#each tracks}}
    {{#if description}}
    /// {{description}}
    {{/if}}
    static func {{functionSignature functionName properties false}} {
        {{functionCall "RudderTyperAnalytics" functionName properties "options" "RSOption()"}}
    }

    {{> functionDocumentation }}
    static func {{functionSignature functionName properties true}} {
        {{indent "        " (propertiesDictionary properties)}}

        {{!-- TODO: run-time JSON Schema validation --}}
        RSClient.sharedInstance()?.track("{{rawEventName}}", properties: properties, options: RudderTyperUtils.addContextFields(options));
    }

    {{/each}}
}
